<main>
  <app-navbar />
  <section class="mx-auto mt-12 w-10/12 bg-white p-4 rounded-md">
    <div class="mb-8">
      <button pButton class="btn-primary" (click)="openWorldDialog()">
        <span class="pi pi-plus"></span>
        Novo Mundo
      </button>
      <app-form-new-world
        [visible]="visibleNewWorld"
        (closeEvent)="closeWorldDialog()"
      />
    </div>
    @if(worlds.length){
      <article>
        <p-table [value]="worlds" [tableStyle]="{ 'min-width': '50rem' }" [rowHover]="true"
        [rows]="10" [paginator]="true">
          <ng-template #header>
              <tr>
                  <th>Nome do Mundo</th>
                  <th>Criador</th>
                  <th>Visibilidade</th>
                  <th>Sistema</th>
              </tr>
          </ng-template>
          <ng-template #body let-world>
              <tr class="cursor-pointer" (click)="selectWorld(world)">
                  <td>{{ world.name }}</td>
                  <td>{{ world.user.username | titlecase }} </td>
                  <td>
                    <p-chip [label]="world.public ? 'Público' : 'Privado'" class="text-white"
                    [ngClass]="world.public ? ' bg-green-500 ': ' bg-blue-600 '"/>
                  </td>
                  <td>{{ world.system ?? "-" }}</td>
              </tr>
          </ng-template>
          <ng-template #emptymessage>
            <tr>
                <td colspan="4">Nenhum mundo encontrado...</td>
            </tr>
        </ng-template>
      </p-table>
      </article>
    }
    @else{
      <h3 class="text-xl">Nenhum mundo criado até o momento...</h3>
    }
  </section>
</main>
